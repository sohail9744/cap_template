"use strict";sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","../env"],function(e,t,n){"use strict";function r(e,t){try{var n=e()}catch(e){return t(e)}if(n&&n.then){return n.then(void 0,t)}return n}const i=n["getConfidentialInfo"];const o=e.extend("wisys.frontend.controller.App",{onInit:function e(){this.router=t.getRouterFor(this);this.onMenuButtonPress()},onBeforeRendering:function e(){this.userAuthentication()},userAuthentication:function e(){try{const e=this;const t=i();let n=sap.ushell.Container?.getService("UserInfo")?.getEmail();if(t.production===false){n=t.mockEmail}if(n){let t=n?.includes("@")?n.split("@")[0].toString():n.toString();e.validatingUser(t)}return Promise.resolve()}catch(e){return Promise.reject(e)}},validatingUser:function e(t){try{const e=this;const n=e.getView()?.getModel();if(!n){throw new Error("OData model is not available.")}const i=n.bindContext("/sfUser1(...)");i.setParameter("userId",t);const o=r(function(){return Promise.resolve(i.execute()).then(function(){const t=i.getBoundContext();if(t){let n=t.getObject().value[0];let r=e.getOwnerComponent()?.getModel("userModel");r?.setData({userId:n?.userId,userEmail:n?.username,userLocation:n?.city,userName:n?.displayName,position:n?.title,nationality:n?.nationality,grade:n?.payGrade,department:n?.division,section:n?.department,location:n?.city,managerName:n?.manager?.displayName,managerId:n?.manager?.userId,managerEmail:n?.manager?.username});r.updateBindings(true);e.getView()?.setBusy(false)}else{}})},function(e){debugger});return Promise.resolve(o&&o.then?o.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},onMenuButtonPress:function e(){let t=this.byId("toolPage");t?.setSideExpanded(!t?.getSideExpanded())},onItemSelect:function e(t){let n=t.getParameter("item").getKey();this.router.navTo(n)}});return o});
//# sourceMappingURL=App.controller.js.map