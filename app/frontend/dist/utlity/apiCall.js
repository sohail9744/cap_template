"use strict";sap.ui.define(["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";function n(e,t){try{var n=e()}catch(e){return t(e)}if(n&&n.then){return n.then(void 0,t)}return n}const r=function(e,r,o,s,i,u,c){try{const l={};if(i)l.$expand=i;if(s)l.$select=s;const a=e.bindList(r,undefined,undefined,o?o:undefined,l);return Promise.resolve(n(function(){return Promise.resolve(a.requestContexts(u??0,c??1e8)).then(function(e){const t=e.map(e=>e.getObject());return t})},function(e){t.error(e.cause.message)}))}catch(e){return Promise.reject(e)}};const o=typeof Symbol!=="undefined"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function s(e,t,n){if(!e.s){if(n instanceof i){if(n.s){if(t&1){t=n.s}n=n.v}else{n.o=s.bind(null,e,t);return}}if(n&&n.then){n.then(s.bind(null,e,t),s.bind(null,e,2));return}e.s=t;e.v=n;const r=e.o;if(r){r(e)}}}const i=function(){function e(){}e.prototype.then=function(t,n){const r=new e;const o=this.s;if(o){const e=o&1?t:n;if(e){try{s(r,1,e(this.v))}catch(e){s(r,2,e)}return r}else{return this}}this.o=function(e){try{const o=e.v;if(e.s&1){s(r,1,t?t(o):o)}else if(n){s(r,1,n(o))}else{s(r,2,o)}}catch(e){s(r,2,e)}};return r};return e}();function u(e){return e instanceof i&&e.s&1}function c(e,t,n){var r=-1,o,c;function l(a){try{while(++r<e.length&&(!n||!n())){a=t(r);if(a&&a.then){if(u(a)){a=a.v}else{a.then(l,c||(c=s.bind(null,o=new i,2)));return}}}if(o){s(o,1,a)}else{o=a}}catch(e){s(o||(o=new i),2,e)}}l();return o}const l=function(e,r,o,s){try{const i={};if(o)i.$apply=o;if(s)i.$filter=s;const u=e.bindList(r,undefined,undefined,undefined,i);return Promise.resolve(n(function(){return Promise.resolve(u.requestContexts()).then(function(e){const t=e.map(e=>e.getObject());return t})},function(e){t.error(e.cause.message)}))}catch(e){return Promise.reject(e)}};function a(e,t,n){if(typeof e[o]==="function"){var r=e[o](),l,a,f;function m(e){try{while(!(l=r.next()).done&&(!n||!n())){e=t(l.value);if(e&&e.then){if(u(e)){e=e.v}else{e.then(m,f||(f=s.bind(null,a=new i,2)));return}}}if(a){s(a,1,e)}else{a=e}}catch(e){s(a||(a=new i),2,e)}}m();if(r.return){var h=function(e){try{if(!l.done){r.return()}}catch(e){}return e};if(a&&a.then){return a.then(h,function(e){throw h(e)})}h()}return a}if(!("length"in e)){throw new TypeError("Object is not iterable")}var d=[];for(var p=0;p<e.length;p++){d.push(e[p])}return c(d,function(e){return t(d[e])},n)}const f=function(r,o,s){try{const i=r.bindList(o);const u=n(function(){return Promise.resolve(i.create(s)).then(function(){e.show("Record created successfully!")})},function(e){t.error(e?.message)});return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};const h=function(n,r,o,s){try{try{let t=n.bindList(r);t.filter(o).requestContexts().then(t=>{const n=t[0];Object.entries(s).forEach(e=>{let[t,r]=e;n.setProperty(t,r)});e.show("Record Updated successfully!")})}catch(e){t.error(e?.message)}return Promise.resolve()}catch(e){return Promise.reject(e)}};const d=function(r,o,s){try{const i=n(function(){const t=r.bindList(o,undefined,undefined,s);return Promise.resolve(t.requestContexts()).then(function(t){const n=function(){if(t.length>0){const n=t[0];return Promise.resolve(n.delete()).then(function(){e.show("Record Deleted Successfully!")})}else{e.show("No matching record found.")}}();if(n&&n.then)return n.then(function(){})})},function(e){t.error(`Error deleting entry: ${e.message}`)});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};const p=function(r,o,s,i){try{let u=false;const c=r.bindList(o);const l=s.length;let f=0;const h=e=>new Promise(t=>setTimeout(t,e));return Promise.resolve(n(function(){function t(t){return u?t:Promise.resolve(r.submitBatch("Bulk_Upload")).then(function(){e.show("All entries created successfully!");return true})}const o=a(s.entries(),function(e){let[t,r]=e;return n(function(){return Promise.resolve(c.create(r).created()).then(function(){f++;m(f,l,i);return Promise.resolve(h(5)).then(function(){})})},function(e){throw e})},function(){return u});return o&&o.then?o.then(t):t(o)},function(e){i.dialog?.close();t.error(`Error during bulk upload: ${e.message}`)}))}catch(e){return Promise.reject(e)}};const m=(e,t,n)=>{const r=Math.floor(e/t*100);const o=`${e}/${t}`;const s=n.getView().getModel("loader");s.setProperty("/percent",r);s.setProperty("/displayValue",o);if(e%Math.floor(t/5)===0){const{title:n,description:r,illustrationType:o}=y(e,t);s.setProperty("/title",n);s.setProperty("/description",r);s.setProperty("/illustrationType",o)}};const y=(e,t)=>{switch(true){case e<=t/5:return{title:"Off to a Great Start!",description:"The journey has just begun—every step matters!",illustrationType:"sapIllus-NoMail"};case e<=t/5*2:return{title:"Keep the Momentum!",description:"You're making solid progress—don't stop now!",illustrationType:"sapIllus-NoTasks"};case e<=t/5*3:return{title:"Halfway There!",description:"You've reached the midpoint—keep up the great work!",illustrationType:"sapIllus-SimpleBalloon"};case e<=t/5*4:return{title:"Almost There!",description:"Just a little more—you're almost at the finish line!",illustrationType:"sapIllus-Tent"};default:return{title:"Upload Complete!",description:"All records have been successfully uploaded!",illustrationType:"sapIllus-BalloonSky"}}};const v=function(e,r){try{return Promise.resolve(n(function(){return Promise.resolve(fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).then(function(e){return Promise.resolve(e.json()).then(function(n){if(!e.ok){t.error(`Status ${n.error.code} - ${n.error.message}`);return null}return n})})},function(e){t.error(e.message)}))}catch(e){return Promise.reject(e)}};const P=e=>{const t=e.getFullYear();const n=String(e.getMonth()+1).padStart(2,"0");const r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`};const g=e=>{v("/odata/v4/catalog/EmailLogs",e)};var b={__esModule:true};b.GET=r;b.GET_GROUP=l;b.POST=f;b.PUT=h;b.DELETE=d;b.BULK_UPLOAD=p;b.FETCH_POST=v;b.formatToISOString=P;b.EMAIL_NOTIFY=g;return b});
//# sourceMappingURL=apiCall.js.map